services:
  homepage:
    image: ghcr.io/gethomepage/homepage:latest
    container_name: homepage
    environment:
      HOMEPAGE_ALLOWED_HOSTS: ${HOMEPAGE_ALLOWED_HOSTS:-localhost}
      PUID: ${HOMEPAGE_PUID:-1000}
      PGID: ${HOMEPAGE_PGID:-1000}
      HOMEPAGE_VAR_LOGO_ICON: ${HOMEPAGE_VAR_LOGO_ICON}
      HOMEPAGE_VAR_BACKGROUND_IMAGE: ${HOMEPAGE_VAR_BACKGROUND_IMAGE}
      HOMEPAGE_VAR_ACTUAL_BUDGET_PORT: ${ACTUAL_BUDGET_PORT:-5096}
      HOMEPAGE_VAR_ADGUARD_HOME_PORT: ${ADGUARD_HOME_PORT:-8096}
      HOMEPAGE_VAR_BESZEL_PORT: ${BESZEL_PORT:-8093}
      HOMEPAGE_VAR_BUGSINK_PORT: ${BUGSINK_PORT:-8090}
      HOMEPAGE_VAR_CHANGEDETECTION_PORT: ${CHANGEDETECTION_PORT:-5091}
      HOMEPAGE_VAR_EXCALIDRAW_PORT: ${EXCALIDRAW_PORT:-5090}
      HOMEPAGE_VAR_FLARESOLVERR_PORT: ${FLARESOLVERR_PORT:-8191}
      HOMEPAGE_VAR_GRAFANA_PORT: ${GRAFANA_PORT:-3091}
      HOMEPAGE_VAR_IT_TOOLS_PORT: ${IT_TOOLS_PORT:-8095}
      HOMEPAGE_VAR_LISTMONK_PORT: ${LISTMONK_PORT:-9090}
      HOMEPAGE_VAR_N8N_PORT: ${N8N_PORT:-5690}
      HOMEPAGE_VAR_OLLAMA_PORT: ${OLLAMA_PORT:-11434}
      HOMEPAGE_VAR_OPEN_WEBUI_PORT: ${OPEN_WEBUI_PORT:-3092}
      HOMEPAGE_VAR_OPENSPEEDTEST_PORT: ${OPENSPEEDTEST_PORT:-3094}
      HOMEPAGE_VAR_PORTAINER_PORT: ${PORTAINER_PORT:-9490}
      HOMEPAGE_VAR_RYOT_PORT: ${RYOT_PORT:-8091}
      HOMEPAGE_VAR_SERPBEAR_PORT: ${SERPBEAR_PORT:-3093}
      HOMEPAGE_VAR_SMOKEPING_PORT: ${SMOKEPING_PORT:-8097}
      HOMEPAGE_VAR_STIRLING_PDF_PORT: ${STIRLING_PDF_PORT:-8092}
      HOMEPAGE_VAR_UPTIME_KUMA_PORT: ${UPTIME_KUMA_PORT:-3096}
      HOMEPAGE_VAR_WALLOS_PORT: ${WALLOS_PORT:-8290}
      HOMEPAGE_VAR_WEALTHFOLIO_PORT: ${WEALTHFOLIO_PORT:-8094}
    ports:
      - "${BIND_IP}:${HOMEPAGE_PORT:-3090}:3000"
    volumes:
      - homepage:/app/config
      - /var/run/docker.sock:/var/run/docker.sock:ro
    restart: unless-stopped
    networks:
      - homelab
    deploy:
      resources:
        limits:
          cpus: "${HOMEPAGE_CPU_LIMIT:-0.5}"
          memory: ${HOMEPAGE_MEMORY_LIMIT:-256M}

networks:
  homelab:
    external: true

volumes:
  homepage:
